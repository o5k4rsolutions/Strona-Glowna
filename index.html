<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pobieranie plików z GitHuba</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter Font -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        .container {
            max-width: 800px;
        }
        .animate-pulse-slow {
            animation: pulse-slow 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        @keyframes pulse-slow {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: .5;
            }
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">

    <div class="container bg-white p-8 rounded-2xl shadow-xl space-y-6">
        <h1 class="text-3xl font-bold text-center text-gray-800 mb-2">Pobieranie plików z GitHuba</h1>
        <p class="text-center text-gray-600 mb-6">Wybierz plik z poniższej listy, aby go pobrać.</p>

        <!-- Container for file buttons -->
        <div id="filesContainer" class="grid grid-cols-1 sm:grid-cols-2 gap-4">
            <!-- File buttons will be generated here by JavaScript -->
        </div>

        <!-- Status and Message Display -->
        <div id="messageBox" class="p-4 mt-4 rounded-xl text-center hidden"></div>

    </div>

    <script>
        // Wait for the window to load before running the script
        window.onload = function() {
            const filesContainer = document.getElementById('filesContainer');
            const messageBox = document.getElementById('messageBox');

            // Array of predefined files to download
            const filesToDownload = [
                {
                    name: 'Faktura_FV/2025/08/001_Ryba_O5K4RSOLUTIONS',
                    url: 'dokumenty/faktury/2025/Faktura_FV:2025:08:001_Ryba_O5K4RSOLUTIONS.pdf'
                },
                {
                    name: 'Plik CSV z danymi',
                    url: 'https://raw.githubusercontent.com/username/repository/main/data.csv'
                },
                {
                    name: 'Kod JavaScript',
                    url: 'https://raw.githubusercontent.com/username/repository/main/script.js'
                },
                {
                    name: 'Obrazek PNG',
                    url: 'https://raw.githubusercontent.com/username/repository/main/image.png'
                }
            ];

            // Function to display a message to the user
            const showMessage = (text, type = 'info') => {
                messageBox.textContent = text;
                messageBox.classList.remove('hidden', 'bg-red-200', 'text-red-800', 'bg-green-200', 'text-green-800', 'bg-blue-200', 'text-blue-800');
                if (type === 'error') {
                    messageBox.classList.add('bg-red-200', 'text-red-800');
                } else if (type === 'success') {
                    messageBox.classList.add('bg-green-200', 'text-green-800');
                } else {
                    messageBox.classList.add('bg-blue-200', 'text-blue-800');
                }
            };

            // Function to handle the file download
            const handleDownload = (fileUrl, fileName, button) => {
                messageBox.classList.add('hidden'); // Clear previous messages
                showMessage("Pobieranie pliku...", 'info');
                button.classList.add('animate-pulse-slow');

                fetch(fileUrl)
                    .then(response => {
                        if (!response.ok) {
                            throw new Error(`Błąd HTTP: ${response.status}`);
                        }
                        return response.blob();
                    })
                    .then(blob => {
                        const link = document.createElement('a');
                        link.href = URL.createObjectURL(blob);
                        link.download = fileName;
                        document.body.appendChild(link);
                        link.click();
                        document.body.removeChild(link);
                        URL.revokeObjectURL(link.href);
                        
                        showMessage(`Plik "${fileName}" został pomyślnie pobrany.`, 'success');
                    })
                    .catch(error => {
                        console.error('Błąd pobierania:', error);
                        showMessage(`Wystąpił błąd podczas pobierania pliku: ${error.message}. Sprawdź, czy URL jest poprawny.`, 'error');
                    })
                    .finally(() => {
                        button.classList.remove('animate-pulse-slow');
                    });
            };

            // Generate buttons for each file
            filesToDownload.forEach(file => {
                const button = document.createElement('button');
                button.textContent = file.name;
                button.className = 'w-full px-6 py-3 text-lg font-semibold text-white bg-blue-600 rounded-xl shadow-md hover:bg-blue-700 transition-colors duration-300';
                
                // Add click event listener to the button
                button.addEventListener('click', () => {
                    handleDownload(file.url, file.name, button);
                });

                filesContainer.appendChild(button);
            });
        };
    </script>

</body>
</html>
